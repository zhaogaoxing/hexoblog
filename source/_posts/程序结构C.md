---
title: C++程序结构
tags: C语言
categories:  C语言学习
---
# 作用域
文件作用域 > 类作用域 > 块作用域
## 可见性的一般规律
1.标识符应声明在先，引用在后。
2.在同一作用域中，不能声明同名的标识符。
3.如果某个标识符在外层中声明，且在内层中没有同一标识符的声明，则该标识符在内层可见。
4.对于两个嵌套的作用域，如果在内层作用域内声明了与外层作用域中同名的标识符，则外层作用域的标识符在内层不可见。

# 对象的生存期
## 静态生存期
生存期 = 程序运行期
文件作用域中的对象都有这样的生存期
函数内部要冠以关键字static
## 动态生存期
块作用域中的对象有这样的生存期（局部生存对象）

# 数据与函数
程序的内存形式：
代码区 - 全局数据区 - 堆区 - 栈区
## 局部变量
（1）在函数内部定义的变量
（2）auto 可省，在栈中分配
（3）只在本函数中使用
（4）不初始化，则为任意值
## 全局变量
（1）在所有函数的外部（例如在main（）主函数之前）定义；
（2）在程序的每个函数中是可见的；
（3）存放在全局数据区内；
（4）若不初始化则初始化为0

# 静态成员
使用类中的静态数据成员——解决访问权限控制问题。
## 静态函数成员
1.类外代码可以使用类名和作用域操作符来调用静态成员函数。
2.静态成员函数只能引用属于该类的静态数据成员或静态成员函数。
3.必须在类外定义和初始化，用(::)来指明所属的类。
4.类外代码可以使用类名和作用域操作符或者对象名来调用静态成员函数。

# 友元（尽量不用）
1.友元是C++提供的一种破坏数据封装和数据隐藏的机制。
2.通过将一个模块声明为另一个模块的友元，一个模块能够引用到另一个模块中本是被隐藏的信息。
3.可以使用友元函数和友元类。
4.为了确保数据的完整性，及数据封装与隐藏的原则，建议尽量不使用或少使用友元。
## 友元函数
1.友元函数是在类声明中由关键字friend修饰说明的非成员函数，在它的函数体中能够通过对象名访问 private 和 protected成员
2.作用：增加灵活性，使程序员可以在封装和快速性方面做合理选择。
3.访问对象中的成员必须通过对象名。
### 友元成员函数
一个类的成员函数可以是另一个类的友元
即：一个类的成员函数可以说明为另一个类的友元函数，以便通过该成员函数访问另一个类中的成员。
## 友元类
1.若一个类为另一个类的友元，则此类的所有成员都能访问对方类的私有成员。
2.声明语法：将友元类名在另一个类中使用friend修饰说明。

注意：
1.友元关系是不能传递的
2.友元关系是单向的

# 数据共享的保护
常类型
常类型的对象必须进行初始化，而且不能被更新。
1.常引用：被引用的对象不能被更新。
const  类型说明符  &引用名
2.常对象：必须进行初始化,不能被更新。
类名  const  对象名
3.常数组：数组元素不能被更新
类型说明符  const  数组名[大小]...
4.常指针：指向常量的指针

## 用const修饰的对象成员
1.常成员函数
类型说明符  函数名（参数表）const;

# 多文件结构和编译预处理命令
1.#include 包含指令
2.#define 宏定义指令
#undef 删除定义的宏
3.#if #endif 条件编译指令

# 多文件结构
类声明文件（.h）
类实现文件（.cpp）
类的使用文件（main所在的.cpp文件）

![823girl2](http://obmrysrv0.bkt.clouddn.com/823girl2.jpg)